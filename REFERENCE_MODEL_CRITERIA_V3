# Reference Model Generation Criteria (V2)

## Overview

This file defines specific criteria for generating reference models in the Wirkmechanismen project. It complements the general gatekeeping criteria with concrete structural rules for consistent and focused models.

## Structural Requirements

### 1. Element taxonomy (MANDATORY)

#### 1.1 Key Factor structure (updated: primary + optional secondary)
- **MANDATORY**: At least **ONE (1) Key Factor** per reference model.
- **MANDATORY**: Exactly **ONE (1) primary Key Factor** MUST be designated.
- **OPTIONAL**: Additional **secondary Key Factors** are allowed (e.g., multi-causal starting points or multiple intervention levers).
- **DEFINITION**: Key Factors represent central problem drivers and serve as primary intervention targets.
- **CLASSIFICATION**: `"element type": "Schlüsselfaktor"`
- **PRIMARY/SECONDARY TAGGING (schema-neutral)**:
  - **MANDATORY**: The primary Key Factor MUST include the tag `[PRIMARY]` at the beginning of `attributes.description`.
  - **OPTIONAL/RECOMMENDED**: Secondary Key Factors SHOULD include `[SECONDARY]` at the beginning of `attributes.description`.
- **REJECT**:
  - models with **zero** Key Factors
  - models with **more than one** `[PRIMARY]` Key Factor tag

#### 1.2 Success Factor structure (updated: not restricted to exactly one)
- **MANDATORY**: At least **ONE (1) Success Factor** per reference model.
- **ALLOWED**: Multiple Success Factors are permitted to represent multi-dimensional goal systems (e.g., quality, cost, time, sustainability).
- **DEFINITION**: Long-term, overarching objectives (e.g., product quality, customer satisfaction).
- **CLASSIFICATION**: `"element type": "Erfolgsfaktor"`
- **MANDATORY (proxy rule, generalized)**: If a Success Factor is not directly measurable (`measurability < 0.8`), a measurable proxy MUST be added.
  - **CLASSIFICATION (proxy)**: `"element type": "Messbarer Erfolgsfaktor"`
  - **TRACEABILITY (schema-neutral)**: The proxy relationship MUST be explained in the proxy’s `attributes.description` (e.g., “Proxy for Erfolgsfaktor X because …”).
- **REJECT**: models with **zero** Success Factors.

#### 1.3 Influencing Factors classification (updated: remove 3–7 recommendation)
- **MANDATORY**: All other factors MUST be classified as Influencing Factors.
- **CLASSIFICATION**: `"element type": "Einflussfaktoren"`
- **REMOVED**: No fixed recommendation of “3–7 Influencing Factors”.
- **REVIEW REQUIRED**: Models with **>10** Influencing Factors (complexity and maintainability check).

### 2. Causal chain / network structure (MANDATORY)

#### 2.1 Causal network topology (updated to support multiple Key/Success Factors)
- **MANDATORY**: The **primary Key Factor** MUST be a start node (no incoming connections within the model).
- **MANDATORY**: All Key Factors SHOULD be start nodes (no incoming connections within the model). If a Key Factor has an incoming connection, the model MUST justify this explicitly in that factor’s `attributes.description`.
- **MANDATORY**: All Success Factors MUST be end nodes (no outgoing connections within the model).
- **MANDATORY**: All Influencing Factors MUST be causally positioned between Key Factor(s) and Success Factor(s).
- **STRUCTURE (generalized)**:
  - `Key Factor(s) → [Influencing Factors] → [Measurable Success Factor(s)] → Success Factor(s)`

#### 2.2 Path requirements (updated to support multiple Key/Success Factors)
- **MANDATORY**: There MUST be at least one directed path from the **primary Key Factor** to **at least one** Success Factor.
- **MANDATORY**: Each Key Factor (primary and secondary) MUST have at least one directed path to **at least one** Success Factor.
- **MANDATORY**: Maximum path length: **4 directed connections** between any Key Factor and any Success Factor along a valid path.
- **MANDATORY**: All Influencing Factors MUST lie on at least one valid Key→Success path, or directly influence such a path.
- **REJECT**:
  - Influencing Factors with no connection to any Key→Success path
  - Influencing Factors with incoming connections from outside the model

### 3. Source attribution (MANDATORY)

#### 3.1 Literature-based connections (priority 1)
- **TARGET**: >50% of all connections with literature sources `[1]`, `[2]`, etc.
- **MANDATORY**: Literature sources MUST be documented in `connection.attributes.description`.
- **FORMAT**: Full academic citation (APA style).
- **REJECT**: literature labels without corresponding documentation.

#### 3.2 Empirical evidence (priority 2)
- **ALLOWED**: stakeholder experience `[E]`, assumption `[A]`, or own investigations `[O]`.
- **MANDATORY**: Describe the evidence basis in `connection.attributes.description`.
- **LIMIT**: Max. 50% of connections without literature basis.

#### 3.3 Invalid sources
- **REJECT**: connections with `[?]` (unknown source)
- **REJECT**: connections without source attribution

### 4. Measurability and influenceability criteria

#### 4.1 Measurability (`measurability`)
- **MANDATORY**: Key Factors MUST be measurable (`measurability ≥ 0.6`).
- **MANDATORY**: Measurable Success Factors MUST be highly measurable (`measurability ≥ 0.8`).
- **MANDATORY**: Success Factors may have lower measurability (`measurability ≥ 0.3`).
- **DOCUMENTATION**: Measurement methods MUST be specified in `attributes.description`.

#### 4.2 Influenceability (`influenceability`)
- **MANDATORY**: Key Factors MUST be influenceable (`influenceability ≥ 0.7`).
- **EXPECTATION**: Success Factors typically have low influenceability (≤ 0.3).
- **LOGIC CHECK**: Influenceability MUST be consistent with factor role.

### 5. Connection semantics

#### 5.1 Direction and polarity
- **MANDATORY**: All connections MUST be directed (`"direction": "directed"`).
- **MANDATORY**: Connection type MUST use DRM polarities (`++`, `+-`, `-+`, `--`).
- **RECOMMENDATION**: Positive main chain from Key Factor(s) to Success Factor(s), where plausible.

#### 5.2 Connection descriptions
- **MANDATORY**: Each connection MUST explain the causal mechanism in `attributes.description`.
- **FORMAT**: “Factor X leads to Factor Y through mechanism Z.”
- **LENGTH**: 20–150 words per description.

### 6. Validation steps

#### 6.1 Automated validation
1. JSON schema compliance (`lint_blueprint.py`)
2. Element/connection ID uniqueness
3. Reference integrity (`from`/`to` refer to existing IDs)
4. Factor taxonomy compliance
5. **Topology validation**:
   - exactly one `[PRIMARY]` Key Factor tag
   - Key Factor(s) behave as start node(s) (primary strictly; others by default)
   - Success Factor(s) behave as end node(s)

#### 6.2 Content validation
1. **Network topology**:
   - primary Key Factor has no incoming connections
   - Success Factor(s) have no outgoing connections
2. **Path completeness**:
   - at least one path primary Key → some Success Factor
   - each Key Factor reaches at least one Success Factor
3. **Influencing factor integration**:
   - all Influencing Factors are connected to at least one Key→Success path
4. Compute source attribution ratio
5. Validate measurability/influenceability consistency
6. Check factor formulation according to DRM principles (“attribute-of-an-element” phrasing)

#### 6.3 Quality metrics
- **Evidence Coverage**: ≥75% literature sources `[1-9]+`
- **Topological Integrity**: 100% - primary Key Factor is a start node; all Success Factors are end nodes; no isolated factors
- **Path Completeness**: 100% - each Key Factor participates in a valid Key→Success chain
- **Factor Integration**: 100% - all Influencing Factors are integrated into at least one Key→Success argument chain
- **Factor Precision**: 100% - all factors follow “attribute-of-an-element” formulation
- **Measurability Consistency**: Measurable Success Factors ≥0.8, Key Factors ≥0.6

## Reference model template (updated: primary/secondary Key Factors + multiple Success Factors allowed)

### Minimal structure
```json
{
  "elements": [
    {
      "_id": "elem-KEY-PRIMARY",
      "attributes": {
        "label": "[attribute of the problem]",
        "element type": "Schlüsselfaktor",
        "measurability": 0.7,
        "influenceability": 0.8,
        "description": "[PRIMARY] START NODE: No incoming connections allowed."
      }
    },
    {
      "_id": "elem-KEY-SECONDARY-1",
      "attributes": {
        "label": "[secondary problem driver attribute]",
        "element type": "Schlüsselfaktor",
        "measurability": 0.6,
        "influenceability": 0.7,
        "description": "[SECONDARY] Additional start node (recommended: no incoming connections)."
      }
    },
    {
      "_id": "elem-INFLUENCING-FACTOR-1",
      "attributes": {
        "label": "[intermediate factor]",
        "element type": "Einflussfaktoren",
        "measurability": 0.6,
        "influenceability": 0.5,
        "description": "Causally between Key Factor(s) and Success Factor(s)."
      }
    },
    {
      "_id": "elem-MEASURABLE-SUCCESS-1",
      "attributes": {
        "label": "[measurable proxy]",
        "element type": "Messbarer Erfolgsfaktor",
        "measurability": 0.9,
        "influenceability": 0.3,
        "description": "Proxy for Erfolgsfaktor elem-SUCCESS-FACTOR-1 because direct measurement is not feasible within the project timeframe."
      }
    },
    {
      "_id": "elem-SUCCESS-FACTOR-1",
      "attributes": {
        "label": "[long-term objective 1]",
        "element type": "Erfolgsfaktor",
        "measurability": 0.4,
        "influenceability": 0.2,
        "description": "END NODE: No outgoing connections allowed."
      }
    },
    {
      "_id": "elem-SUCCESS-FACTOR-2",
      "attributes": {
        "label": "[long-term objective 2]",
        "element type": "Erfolgsfaktor",
        "measurability": 0.5,
        "influenceability": 0.2,
        "description": "END NODE: No outgoing connections allowed."
      }
    }
  ],
  "connections": [
    {
      "_id": "conn-KEYPRIMARY-TO-INFLUENCING",
      "from": "elem-KEY-PRIMARY",
      "to": "elem-INFLUENCING-FACTOR-1",
      "direction": "directed",
      "attributes": {
        "label": "[1]",
        "connection type": "++",
        "description": "Explain the causal mechanism linking the primary Key Factor to the intermediate factor. Include APA citation(s)."
      }
    },
    {
      "_id": "conn-INFLUENCING-TO-MEASURABLE",
      "from": "elem-INFLUENCING-FACTOR-1",
      "to": "elem-MEASURABLE-SUCCESS-1",
      "direction": "directed",
      "attributes": {
        "label": "[2]",
        "connection type": "++",
        "description": "Explain how the intermediate factor affects the measurable proxy. Include APA citation(s) or allowed evidence tags."
      }
    },
    {
      "_id": "conn-MEASURABLE-TO-SUCCESS1",
      "from": "elem-MEASURABLE-SUCCESS-1",
      "to": "elem-SUCCESS-FACTOR-1",
      "direction": "directed",
      "attributes": {
        "label": "[3]",
        "connection type": "++",
        "description": "Describe the proxy relationship to the Success Factor (why this proxy is valid). Include APA citation(s) if available."
      }
    }
  ]
}
